{% extends 'manage_index.html' %}
{% block content %}
<div class="col-xs-14 col-lg-24">
    <h2>尺寸列表</h2>
    <table class="table table-hover">
        <thead>
        <tr>
            <th></th>
            <th>尺寸名称</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        {% for size in sizes_list %}
        <tr>
            <td><input type="checkbox" name="del_sizes" id="{{ size.size_id }}"></td>
            <td>{{ size.size_name }}</td>
            <td><p><a class="btn btn-default" href="{% url 'req_modify_size' %}?size_id={{ size.size_id }}" role="button">修改尺寸</a></p></td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    <a class="btn btn-default" href="javascript:void(0);" onclick="del_items()" role="button">删除选中的尺寸</a>
    <a class="btn btn-default" href="{% url 'req_add_size' %}" role="button">添加尺寸</a>
</div><!--/.col-xs-6.col-lg-4-->
{% endblock %}
{% block options %}
<div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar">
    <div class="list-group">
        <a href="{% url 'index' %}" class="list-group-item">商品管理</a>
        <a href="{% url 'req_brand' %}" class="list-group-item">品牌管理</a>
        <a href="{% url 'req_class' %}" class="list-group-item">分类管理</a>
        <a href="{% url 'req_style' %}" class="list-group-item">颜色/款式管理</a>
        <a href="{% url 'req_size' %}" class="list-group-item active">尺寸管理</a>
        <a href="#" class="list-group-item">订单管理</a>
        <a href="#" class="list-group-item">发货管理</a>
        <a href="{% url 'req_shop_addr' %}" class="list-group-item">门店管理</a>
        <a href="{% url 'req_admin' %}" class="list-group-item">管理员管理</a>
        <a href="{% url 'req_client' %}" class="list-group-item">会员管理</a>
    </div>
</div><!--/.sidebar-offcanvas-->
{% endblock %}
{% block manager_register_login_options_js %}
<script type="text/javascript">
    function del_items() {
        if (window.confirm("您确定要删除吗？")) {
            //var username = "{{login_user}}";
            var url = "/manage/delete_items/";
            var i = 0;
            var deleList = new Array();
            $("input[name='del_sizes']:checked").each(function () {
                i++;
                deleList[i] = $(this).attr('id');
            });
            $.post(url,
                    {
                        del_object: 'size',
                        del_item_list: deleList.toString()
                    }, function (data) {
                        for (var i = 1; i < deleList.length; i++) {
                            var del_node = document.getElementById(deleList[i]);
                            var del_tr = del_node.parentNode.parentNode;
                            del_tr.parentNode.removeChild(del_tr);
                        }
                        var del_box_list = document.getElementsByName("del_sizes");
                        for (var i = 0; i < del_box_list.length; i++) {
                            del_box_list[i].checked = false;
                        }
                        alert(data);
                    });
        }
    }
</script>
{% endblock %}
